@model  Model.DTO.AlunoInadimpente
@{
    ViewData["Title"] = "Alunos Inadimplentes";
}

<head>
    <style>
        nav.clean {
            background: none;
            box-shadow: none;
        }

            nav.clean .breadcrumb {
                color: black;
            }

                nav.clean .breadcrumb:before {
                    color: rgba(0, 0, 0, 0.7);
                }

        .breadcrumb {
            color: black;
            font-size: 15px;
        }

        .btn-flat {
            background-color: #af2405;
            color: #fff
        }

        .btn {
            background-color: #af2405;
        }

            .btn:hover {
                background-color: #7c1a04;
            }

        /* INPUT COLOR */
        .input-field input:focus + label {
            color: #af2405 !important;
        }

        .row .input-field input:focus {
            border-bottom: 1px solid #af2405 !important;
            box-shadow: 0 1px 0 0 #af2405 !important
        }

        .tabs .tab a:hover, .tabs .tab a.active {
            background-color: transparent;
            color: #af2405;
        }

        .tabs .indicator {
            position: absolute;
            bottom: 0;
            height: 2px;
            background-color: #af2405;
            will-change: left, right;
        }

        .tabs .tab a {
            color: #af2405;
        }
    </style>
</head>

<!-- BREADCRUMB -->
<nav class="clean container">
    <div class="nav-wrapper">
        <div class="col s12">
            <span class="left">
                <a href="@Url.Action("Index", "Principal")" class="breadcrumb">Principal</a>
                <a href="#" class="breadcrumb">Cadastro</a>
                <a href="@Url.Action("Index", "Alunos Inadimplentes")" class="breadcrumb"><strong>Alunos Inadimplentes</strong></a>
            </span>
        </div>
    </div>
</nav>

@*<div class="row container">
    <div class="col s12 l12">
        <a class="btn waves-effect waves-light modal-trigger right" style="background-color:#808080">Enviar e-mail para todos</a>
    </div>
</div>*@

@if (Model.AlunosInadimplentes.Count > 0)
{
    <table class="table highlight centered container ">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Data de Nascimento</th>
                <th>CPF</th>
                <th>RG</th>
                <th>Telefone</th>
                <th>Email</th>
                <th>Data de Vencimento</th>
                <th>Status da Mensalidade</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.AlunosInadimplentes)
            {
                <tr>
                    <td><a href="#modalMatricula" class="modal-trigger" title="Acessar Matricula">@item.Nome</a></td>
                    <td>@item.DataNascimento.ToString("dd/MM/yyyy")</td>
                    <th>@item.CPF</th>
                    <th>@item.RG</th>
                    <td>@item.Telefone</td>
                    <td>@item.Email</td>
                    <td>@item.DataDeVencimento.ToString("dd/MM/yyyy")</td>

                    @*//TODO: LInk para tela de mensalidades, assim que o front de mensalidades estiver pronto *@
                    <td><font color="red">@item.StatusDaMensalidade</font></td>
                    @*<td>
                        <a class="btn-floating btn-sm waves-effect waves-light blue modal-trigger" onclick="mandarEmail('@item.IdAluno', '@item.Nome', '@item.Email', '@item.DataDeVencimento')"><i class="material-icons" style="background-color:#808080">email</i></a>
                    </td>*@
                </tr>
            }
        </tbody>
    </table>
}

<div id="modalMatricula" class="modal">
    <div class="modal-content">
        <h4 class="flow-text">Diego Magalhaes de Souza</h4>
        <div class="divider"></div>
        <p>RG: <strong>312312312</strong></p>
        <p>CPF: <strong>312312312</strong></p>
        <p>Data Nasc: <strong>31/10/1999 - 20 Anos</strong></p>
        <p>Status Mensalidade: <strong class="green-text">Pago</strong></p>

        <table class="centered">
            <thead>
            <th>Turma</th>
            <th>Curso Matriculado</th>
            <th>Professor</th>
            <th>Horário da Turma</th>
            </thead>
            <tbody>
            <td>AB13</td>
            <td>Natação</td>
            <td>Andressa</td>
            <td>13:00</td>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close btn-flat" style="background-color:inherit; border:inherit; color: black">Fechar</a>
    </div>
</div>

@section scripts{
    @*<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <script type="text/javascript">

        let valorIdAluno;
        let valorEmail;
        let valorNome;
        let valorVencimento;

        function mandarEmail(IdAluno, Nome, Email, DataDeVencimento)
        {
            debugger;

            valorIdAluno = IdAluno;
            valorEmail = Email;
            valorNome = Nome;
            valorVencimento = DataDeVencimento;

            mandrill('/messages/send', 
            {
                message: 
                {
                    to: [{email: Email , name: Nome}],
                    from_email: 'gzm.8292@gmail.com',
                    subject: 'TESTE EMAIL',
                    text: 'TESTE EMAIL'
                }
            }, function(error, response)
                {
                    if (error) console.log( error );
                    else console.log(response);
            });




        }


    </script>*@
}
}
