@model IList<Model.Entity.Aula>
@{
    ViewData["Title"] = "Aulas";
}

<nav class="clean container">
    <div class="nav-wrapper">
        <div class="col s12">
            <span class="left">
                <a id="paginaPrincipal" href="@Url.Action("Index", "Principal")" class="breadcrumb">Principal</a>
                <a href="#" class="breadcrumb">Cadastro</a>
                <a id="paginaAula" href="@Url.Action("Index", "Aula")" class="breadcrumb"><strong>Aulas</strong></a>
            </span>
        </div>
    </div>
</nav>

@Html.Partial("_TabelaTurmas", Model)
@Html.Partial("_ModelEditar", Model)

@section scripts{
    <script>
        function ModalListaPresenca(turmaId) {
                 $.ajax({
                     dataType: "json",
                     type: "POST",
                     url: "@Url.Action("CarregarListaDeChamada", "Aula")",
                     data: { turmaId: turmaId },
                     success: function (dados) {
                         if (dados.length > 0)
                         {
                             now = new Date;
                             document.getElementById("editarAulaModal").innerText = "Lista de chamada Turma: " + dados[0].DescricaoTurma;
                             document.getElementById("turma").value = dados[0].DescricaoTurma;
                             document.getElementById("diaAula").value = now.getDay();
                             document.getElementById("diasSemanas").value = dados[0].DiaDaSemana;
                             document.getElementById("professorTurma").value = dados[0].NomeColaborador;
                             document.getElementById("modalidade").value = dados[0].TipoModalidade;
                             document.getElementById("faixaEtaria").value = dados[0].TipoFaixaEtaria;
                             document.getElementById("dataAulaInicio").value = dados[0].HorarioInicial;
                             document.getElementById("dataAulaFim").value = dados[0].HorarioFinal;
                         }
                         $("#Grid tr").remove();
                         $(dados).each(function () {
                             if (this.Presenca === true) {
                                 $("#Grid").append("<tr><td class='left'><label><input type='checkbox' id='" + this.Id + "' checked='checked' /><span>" + this.NomeAluno + "</span></label></td><td>" + this.Email + "</td><td>" + this.CPF + "</td> <td>" + this.DataNascimento.substring(0, 10) + "</td></tr>");
                             } else {

                                 $("#Grid").append("<tr><td class='left'><label><input type='checkbox' id='" + this.Id + "'/><span>" + this.NomeAluno + "</span></label></td><td>" + this.Email + "</td><td>" + this.CPF + "</td> <td>" + this.DataNascimento.substring(0,10) + "</td></tr>");
                             }
                         });
                }
            });
        }

    </script>
}